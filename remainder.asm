.ORIG x3000
        LD R1, X ; load X to R1
        LD R2, Y ; load HY Y to R2

        JSR REM
        HALT

REM     AND R3, R3, #0 ; now R2 is zero for the remainder
        ADD R3, R3, R2 ; R3=R2
        NOT R4, R1 ; 2's complement
        ADD R4,R4,#1 ; R4=-R1
REML    ADD R3, R3, R4 ; R3=R3-R1
        BRzp REML
        ADD R3, R3, R1 ; R3=R3+R1 revese the last substraction
        RET

X       .FILL #4
Y       .FILL #16
.END


; ; this is the code that calculates R3=R2 MOD R1
; 0101011011100000
; 0001011011000010
; 1001100001111111
; 0001100100100001
; 0001011011000100
; 0000011111111110
; 0001011011000001
; ; this is the whole code (.bin file)
; 0011000000000000
; 0010001000001011
; 0010010000001011
; 0100100000000001
; 1111000000100101
; 0101011011100000
; 0001011011000010
; 1001100001111111
; 0001100100100001
; 0001011011000100
; 0000011111111110
; 0001011011000001
; 1100000111000000
; 0000000000000100
; 0000000000010000